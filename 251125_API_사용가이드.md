# BlogDex Grade API 사용 가이드

**작성일**: 2025년 11월 25일

---

## API 엔드포인트

```
POST https://blogdex.ngrok.app/api/blog/grade
```

---

## 요청 형식

### Headers
```
Content-Type: application/json
ngrok-skip-browser-warning: true
```

### Request Body
```json
{
  "url": "https://blog.naver.com/블로그ID"
}
```

**지원 URL 형식**:
- `https://blog.naver.com/nightd` (블로그 ID만)
- `https://blog.naver.com/nightd/224041403656` (특정 글 주소)

---

## 응답 형식

### 성공
```json
{
  "url": "https://blog.naver.com/jaesung_lee7",
  "blog_id": "jaesung_lee7",
  "grade": "일반",
  "level": "스타터1",
  "tier": "스타터 블로거",
  "success": true,
  "error": null
}
```

### 실패
```json
{
  "url": "https://blog.naver.com/example",
  "level": null,
  "success": false,
  "error": "등급 추출 실패 (3회 재시도 소진)"
}
```

---

## PHP 예제

```php
<?php

$ch = curl_init("https://blogdex.ngrok.app/api/blog/grade");
curl_setopt($ch, CURLOPT_POST, true);
curl_setopt($ch, CURLOPT_POSTFIELDS, json_encode([
    "url" => "https://blog.naver.com/nightd"
]));
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
curl_setopt($ch, CURLOPT_TIMEOUT, 30);
curl_setopt($ch, CURLOPT_HTTPHEADER, [
    "Content-Type: application/json",
    "ngrok-skip-browser-warning: true"
]);

$response = curl_exec($ch);
curl_close($ch);

$result = json_decode($response, true);

if ($result['success']) {
    echo "등급: " . $result['level'];
} else {
    echo "오류: " . $result['error'];
}

?>
```

---

## 주의사항

- **응답 시간**: 평균 15~20초 (타임아웃 30초 권장)
- **최대 동시 요청**: 3개
- **ngrok 도메인**: `blogdex.ngrok.app` (고정)

---

## Health Check

```bash
curl https://blogdex.ngrok.app/health
```

**정상 응답**:
```json
{
  "status": "ok",
  "message": "BlogDex Grade API is running",
  "max_concurrent": 3
}
```
